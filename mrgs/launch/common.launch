<!--
  This file takes care of launching the whole system. This is not supposed to be called directly, unless you know what
  you're doing.
  Arguments are:
    interface: the network interface the system will use to communicate;
    is_centralized: a boolean indicating whether the system will be operating in centralized mode. This is mainly
                    used by the data interface node to work out how to build the map vector.
-->
<launch>

  <!-- Arguments -->
  <arg name="is_centralized"  default="false"/>
  <arg name="launch_rviz"  default="true"/>
  <arg name="alt_mode" default="false"/>
  <arg name="robot_name"/>
  <param name="tf_prefix" value="" />

  <!-- Parameters -->
  <param name="is_centralized" value="$(arg is_centralized)"/>
  <param name="is_transmitter" value="false"/>

  <!-- mrgs -->
  <!-- mrgs_data_interface node-->
  <node name="data_interface_node" pkg="mrgs_data_interface" type="data_interface_node" output="screen">
  </node>
<!--      <param name="tf_prefix" value="$(arg robot_name)_tf"/>-->


  <!-- mrgs_complete_map node -->
  <node name="complete_map_node" pkg="mrgs_complete_map" type="complete_map_node" output="screen" unless="$(arg alt_mode)">
<!--      <param name="tf_prefix" value="$(arg robot_name)_tf"/>-->
  </node>

  <node name="complete_map_node_alt" pkg="mrgs_complete_map" type="complete_map_node_alt" output="screen" if="$(arg alt_mode)">
<!--      <param name="tf_prefix" value="$(arg robot_name)_tf"/>-->
  </node>

  <!-- mrgs_alignment node -->
  <node name="align_node" pkg="mrgs_alignment" type="align_node" output="screen" cwd="node">
<!--      <param name="tf_prefix" value="$(arg robot_name)_tf"/>-->
  </node>

  <!-- remote_nav node -->
  <node name="remote_nav_node" pkg="mrgs_auxiliary_nodes" type="remote_nav_node" output="screen">
<!--      <param name="tf_prefix" value="$(arg robot_name)_tf"/>-->
<!--    <remap from="/tf"  to="$(arg robot_name)/tf"/>-->
  </node>

  <!-- dam node -->
    <!-- if "unless=centralised" is true, previous commands/node will not be launched? idk -->
  <node name="map_dam_node" pkg="mrgs_auxiliary_nodes" type="map_dam_node" output="screen" unless="$(arg is_centralized)">
<!--      <param name="tf_prefix" value="$(arg robot_name)_tf"/>-->
  </node>

  <!-- Rviz -->
<!--   <node name="$(arg prefix)rviz" pkg="rviz" type="rviz" args="-d $(find mrgs_scripts)/rviz/mrgs_default.rviz" if="$(arg launch_rviz)" /> -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find mrgs_scripts)/rviz/mrgs_default.rviz" if="$(arg launch_rviz)">
<!--      <param name="tf_prefix" value="$(arg robot_name)_tf"/>-->
  </node>

  <!-- modified rqt_console (was originally commented out)-->
<!--   <node name="console" pkg="rqt_console" type="rqt_console"/> -->
<!--   <node name="logger_level" pkg="rqt_logger_level" type="rqt_logger_level"/> -->
</launch>
